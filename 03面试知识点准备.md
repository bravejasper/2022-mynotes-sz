#### 1.抽象类和接口的区别

接口用来做规范，抽象类用来封装

http://t.csdn.cn/z8qki

```
抽象类
抽象类使用abstract修饰类
抽象类当中可以包含普通类所能包含的成员
抽象类和普通类不一样的是，抽象类当中可以包含抽象方法。
抽象类方法是使用abstract修饰的，这个方法没有具体的实现
不能实例化抽象类
抽象类存在的意义是为了被继承
抽象类的方法不能是私有的（private）,要满足重写的规则。
抽象类当中可以有构造方法，为了方便子类能够调用，来初始化抽象类当中的成员

接口
1.使用interface来修饰接口
2.接口当中的成员方法不能有具体的实现（jdk1.8以后才有默认实现）。
在接口中抽象方法默认是public abstract的方法
接口不可以被实例化，也就是说接口不能有静态代码块和构造方法
可以通过implements实现接口，接口里面的抽象方法必须重写，默认方法可重写也可以不重写，静态方法不能被重写。
接口的使用
实现多个接口

抽象类和接口的区别：
Object类
toString
equals
抽象类和接口的区别：
抽象类可以包含普通字段和成员，接口中不能包含普通方法，子类必须重写所有的抽象方法
抽象方法由普通类（普通字段和方法）和抽象方法组成
接口由抽象方法和全局常量组成
使用extends继承抽象类，使用implements关键字实现接口
一个抽象类可以实现若干个接口，接口不能继承抽象类，接口可以使用extends继承多个父类接口
一个子类只能继承一个抽象类，一个子类可以实现多个接口
```



##### 1.1实例化

实例化是指在 面向对象 的编程中，**把用类创建对象的过程**称为实例化。 是将一个抽象的概念类，具体到该类实物的过程。 实例化过程中一般由类名 对象名 = new 类名（参数1，参数2...参数n）构成。 

如 Date date=new Date ();就是用日期类创建了一个日期的对象，就叫对象的实例化。 

多数语言中，实例化一个对象就是为对象开辟内存空间，或者是不用声明，直接使用new 构造函数名，建立一个临时对象。



##### 1.2声明

java中，可以通过指定数据类型和标识符来设置（声明）变量，语法为“变量类型 变量名称;” 或 “变量类型 变量名称=初始值;”；变量类型可以为int、string、char和double等。



##### 1.3构造方法

1.构造方法是类的一种特殊方法，用来初始化类的一个新的对象，在创建对象（new 运算符）之后自动调用。

2.Java中的每个类都有一个默认的构造方法，并且可以有一个以上的构造方法。

3.Java 构造方法有以下特点：

- 方法名必须与类名相同
- 可以有 0 个、1 个或多个参数
- 没有任何返回值，包括 void
- 默认返回类型就是对象类型本身
- 只能与 new 运算符结合使用

值得注意的是，如果为构造方法定义了返回值类型或使用 void 声明构造方法没有返回值，编译时不会出错，但 Java 会把这个所谓的构造方法当成普通方法来处理。

4.注意：构造方法不能被 static、final、synchronized、abstract 和 native（类似于 abstract）修饰。构造方法用于初始化一个新对象，所以用 static 修饰没有意义。构造方法不能被子类继承，所以用 final 和 abstract 修饰没有意义。多个线程不会同时创建内存地址相同的同一个对象，所以用 synchronized 修饰没有必要。

5.例1：

构造方法主要有无参构造方法和有参构造方法两种，示例如下：

```java 
public class MyClass {
    private int m;    // 定义私有变量
    MyClass() {
        // 定义无参的构造方法
        m = 0;
    }
    MyClass(int m) {
        // 定义有参的构造方法
        this.m = m;
    }
}
```

该示例定义了两个构造方法，分别是无参构造方法和有参构造方法。在一个类中定义多个具有不同参数的同名方法，这就是方法的重载。这两个构造方法的名称都与类名相同，均为 MyClass。在实例化该类时可以调用不同的构造方法进行初始化。

注意：类的构造方法不是要求必须定义的。如果在类中没有定义任何一个构造方法，则 Java 会自动为该类生成一个默认的构造方法。默认的构造方法不包含任何参数，并且方法体为空。如果类中显式地定义了一个或多个构造方法，则 Java 不再提供默认构造方法。

提示：无参数的构造方法也被称为 Nullary 构造方法。只有编译程序自动加入的构造方法，才称为默认构造函数。如果自行编写无参数、没有内容的构造函数，就不称为默认构造函数了（只是 Nullary 构造函数）。虽然只是名词定义，不过认证考试时要区别一下两者的不同。

例 2：

要在不同的条件下使用不同的初始化行为创建类的对象，这时候就需要在一个类中创建多个构造方法。下面通过一个示例来演示构造方法的使用。

1）首先在员工类 Worker 中定义两个构造方法，代码如下：

```java 
public class Worker {
    public String name;    // 姓名
    private int age;    // 年龄
    // 定义带有一个参数的构造方法
    public Worker(String name) {
        this.name = name;
    }
    // 定义带有两个参数的构造方法
    public Worker(String name,int age) {
        this.name = name;
        this.age = age;
    }
    public String toString() {
        return "大家好！我是新来的员工，我叫"+name+"，今年"+age+"岁。";
    }
}
```



#### 2.你的XXX项目中是怎么解决分布式登录问题的

1.你的XXX项目中是怎么解决分布式登录问题的？
分布式登录会现单点登录问题：由于后台是多个微服，且登录用户信息是保存到session，当经过负载均衡转发时，转给没有登录过的微服时，没有session会导致重新登录

解决这个问题：

##### 1.1JWT token实现

JWT 生成的token 包含三部分，其中载荷部分就用存储登录用户信息
当用户登录成功后，生成token，把用户信息存入token中的载荷(Base64编码json数据，不能是敏感数据)，返回token给客户端
客户端发来请求时，通过JwtUtil校验token的有效性，当需要用到用户信息时就可以从token的载荷中来获取

##### 1.2如果使用redis 如何实现

登录时：以key=login_user_用户名,用户信息为value存入redis，且设置有效期(PC 30分钟, APP(7天或30天))，返回用户名给客户端
再次请求：用户每次请求时带上用户名, 判断redis的key是否存在，如果不存在则要求登录，如果存在放行。重新设置有效期



##### 补充点：

##### 1.token续期

30分钟.setExpiration(30  *60*  1000)
45分钟以内还有请求，生成新的token，返回给客户端，需要客户端配合。

##### 2.redis实现

续期（每次请求时，重新设置有效为30分钟）

##### 3.双token:

无状态通讯，生成token或解析token比较耗CPU性能(算法)
accessToken:   权限认证       需要独立的token服务器
refreshToken:   当accessToken过期时，用来换新的accessToken
请求访问时，如果后台校验到accessToken已过期，则返回给前端token已失效时。
前端请求Token服务器，提交refreshToken，Token服务验证refreshToken有效性，如果有效则生成新的一对token(accessToken与refreshToken)给前端
前端使用新的accessToken请求后端服务

##### 4.Jwt组成

Header请求头、Payload 载荷、Signature签名。

##### 5.Token令牌

  有状态通讯：用户登录后，把登录用户信息保存在服务端,安全可靠。占用内存空间 （金融与保险行业）

  无状态通讯：用户登录后，服务端不存储登录用户信息，登录用户信息存在token里，用户每次请求时必须带上token。优点：不占空间，缺点：相对没那么安全 社交软件

##### 6.Redis

Redis是一个基于**内存**的key-value结构数据库。Redis 是互联网技术领域使用最为广泛的存储中间件，它是「**Re**mote **Di**ctionary **S**ervice」的首字母缩写，也就是「远程字典服务」。

基于内存存储，读写性能高。

它可以用作：数据库、缓存和消息中间件。







